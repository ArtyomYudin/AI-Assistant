import re

class PoliteDetector:
    """
    –õ–æ–∫–∞–ª—å–Ω—ã–π –¥–µ—Ç–µ–∫—Ç–æ—Ä –≤–µ–∂–ª–∏–≤—ã—Ö/—Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
    –ù–µ –≤—ã–∑—ã–≤–∞–µ—Ç LLM, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
    –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ä–µ–≥—ç–∫—Å–ø–∞—Ö.
    """

    POLITE_PATTERNS = [
        r"^—Å–ø–∞—Å–∏–±–æ[!. ]*$",
        r"^—Å–ø–∞—Å–∏–±–æ –±–æ–ª—å—à–æ–µ[!. ]*$",
        r"^–±–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ[!. ]*$",
        r"^–±–ª–∞–≥–æ–¥–∞—Ä—é[!. ]*$",

        r"^(–æ–∫|–æ–∫–µ–π|–∞–≥–∞|–ø–æ–Ω—è–ª|—è—Å–Ω–æ|—Ö–æ—Ä–æ—à–æ)[!. ]*$",
        r"^(–¥–∞|–Ω–µ—Ç)[!. ]*$",

        r"^–ø—Ä–∏–≤–µ—Ç[!. ]*$",
        r"^–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ[!. ]*$",
        r"^–¥–æ–±—Ä—ã–π –¥–µ–Ω—å[!. ]*$",
        r"^–¥–æ–±—Ä—ã–π –≤–µ—á–µ—Ä[!. ]*$",
    ]

    @classmethod
    def is_polite(cls, text: str) -> bool:
        t = text.strip().lower()
        return any(re.match(p, t) for p in cls.POLITE_PATTERNS)

    @classmethod
    def reply(cls, text: str) -> str:
        t = text.lower()

        if "—Å–ø–∞—Å" in t or "–±–ª–∞–≥–æ–¥–∞—Ä" in t:
            return "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞! –†–∞–¥–∞ –ø–æ–º–æ—á—å üòä"

        if t.startswith(("–ø—Ä–∏–≤–µ—Ç", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π", "–∑–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ")):
            return "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?"

        if t.startswith("–¥–æ–±—Ä—ã–π"):
            return "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º —è –º–æ–≥—É –ø–æ–º–æ—á—å?"

        if t in ("–æ–∫", "–æ–∫–µ–π", "–∞–≥–∞", "–ø–æ–Ω—è–ª", "—è—Å–Ω–æ", "—Ö–æ—Ä–æ—à–æ"):
            return "–•–æ—Ä–æ—à–æ! –ï—Å–ª–∏ –±—É–¥—É—Ç –≤–æ–ø—Ä–æ—Å—ã ‚Äî —Å–ø—Ä–∞—à–∏–≤–∞–π—Ç–µ."

        return "–Ø –∑–¥–µ—Å—å, —á—Ç–æ–±—ã –ø–æ–º–æ—á—å üòä"